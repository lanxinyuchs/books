<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright (c) 2017 Ericsson AB.
  All rights reserved

  DX ECIM Tool-chain generated this file on Nov 21, 2017 2:42:14 PM using:
  * com.ericsson.ecim.m2m 2.15.0.201710201249
  * com.ericsson.ecim.dsl 2.15.0.201710201249
  * com.ericsson.ecim.edm 2.15.0.201710201249
--><!DOCTYPE models SYSTEM "mp.dtd">
<models>
  <dtdVersion>H</dtdVersion>
  <momMetaData>
    <momTitle>title</momTitle>
    <momSubTitle>sub title</momSubTitle>
    <momIdentity>
      <docNum>0</docNum>
      <docLang>English</docLang>
      <docRev>0</docRev>
      <docDate>28/04/2017</docDate>
    </momIdentity>
  </momMetaData>
  <mim author="ETXJOTJ" contact="ETXJOTJ" correction="0" date="2017-11-16" docNo="1/155 54-CNX 901 2610" name="RcsFileTPM" namespace="urn:com:ericsson:ecim:RcsFileTPM" namespacePrefix="rcsfiletpm" organization="" release="1" revision="A" version="2">
    <description>This fragment supports configuration management of the file transfer protocols.&#13;
</description>
    <domainExtension domain="ECIM">
      <extension name="ecimMomName" value="ECIM_FileTPM"/>
      <extension name="ecimMomVersion" value="2"/>
      <extension name="ecimMomRelease" value="1"/>
      <extension name="ecimMomCorrection" value="0"/>
    </domainExtension>
    <implements correction="0" name="ECIM_FileTPM" release="1" version="2"/>
    <enum name="BasicAdmState">
      <description>Basic administrative states for a resource.</description>
      <domainExtension domain="ECIM">
        <extension name="originatingMimVersion" value="2"/>
        <extension name="originatingMimRelease" value="3"/>
        <extension name="originatingMimName" value="ECIM_CommonLibrary"/>
      </domainExtension>
      <enumMember name="LOCKED">
        <description> The resource is administratively prohibited from performing services for its users.</description>
        <value>0</value>
      </enumMember>
      <enumMember name="UNLOCKED">
        <description>The resource is administratively permitted to perform services for its users.
This is independent of its inherent operability.</description>
        <value>1</value>
      </enumMember>
    </enum>
    <derivedDataType name="SshAlgorithm">
      <description>Derived string for SSH Cipher, Key Exchange and Message Authentication Code strings.</description>
      <baseType>
        <string>
          <validValues>^([a-zA-Z0-9])+((-([a-zA-Z0-9])*)?)*(@(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9]))?$</validValues>
        </string>
      </baseType>
      <validationRules>
        <rule exceptionText="" format="posix_ere" name="Pattern Constraint"><![CDATA[^([a-zA-Z0-9])+((-([a-zA-Z0-9])*)?)*(@(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9]))?$]]></rule>
      </validationRules>
    </derivedDataType>
    <derivedDataType name="RcsFileTPM_FtpServer_idleTimer">
      <baseType>
        <uint16>
          <range>
            <min>1</min>
          </range>
          <ranges>
            <subrange>
              <min>1</min>
              <max>*</max>
            </subrange>
          </ranges>
          <unit>seconds</unit>
        </uint16>
      </baseType>
    </derivedDataType>
    <class name="FileTPM">
      <description>The top class for server and client configuration of different protocols implementing file transfer.&#13;
Lists the protocols supported by the ME by any file transfer client or server.</description>
      <systemCreated/>
      <root/>
      <attribute name="fileTPMId">
        <description>Holds the name used when identifying the MO.</description>
        <mandatory/>
        <noNotification/>
        <restricted/>
        <key/>
        <dataType>
          <string/>
        </dataType>
      </attribute>
    </class>
    <class name="FtpTls">
      <description>Represents the common configuration parameters of FTP over Transport Layer Security (TLS) clients on the ME.&#13;
&#13;
&#13;
</description>
      <systemCreated/>
      <attribute name="ftpTlsId">
        <description>Holds the name used when identifying the MO.</description>
        <mandatory/>
        <noNotification/>
        <restricted/>
        <key/>
        <dataType>
          <string/>
        </dataType>
      </attribute>
      <attribute name="nodeCredential">
        <description>The credential used for FTP over TLS based file transfer. &#13;
Specifies the DN of a NodeCredential MO in Certificate Management.&#13;
</description>
        <domainExtension domain="ECIM">
          <extension name="isNillable" value="true"/>
        </domainExtension>
        <isNillable/>
        <dataType>
          <moRef name="ManagedObject"/>
        </dataType>
      </attribute>
      <attribute name="trustCategory">
        <description>The set of certificates trusted by the FTP over TLS based file transfer. &#13;
Specifies the DN of a TrustCategory MO in Certificate Management.&#13;
</description>
        <domainExtension domain="ECIM">
          <extension name="isNillable" value="true"/>
        </domainExtension>
        <isNillable/>
        <dataType>
          <moRef name="ManagedObject"/>
        </dataType>
      </attribute>
    </class>
    <class name="FtpTlsServer">
      <description>Represents the FTP over Transport Layer Security (TLS) server of the ME.&#13;
&#13;
The server only accepts FTP sessions that are explicitly requesting a TLS layer by the "AUTH TLS" command.</description>
      <systemCreated/>
      <validationRules>
        <rule exceptionText="" format="ECIM_Schematron_1.0" name="maxDataPort must be greater than or equal to minDataPort">
	      <![CDATA[<schema xmlns="http://purl.oclc.org/dsdl/schematron">
	        <pattern>
	          <rule context = "FtpTlsServer">
	            <assert test="number(@maxDataPort) ge number(@minDataPort)">maxDataPort must be greater than or equal to minDataPort.</assert>
	          </rule>
	        </pattern>
	      </schema>]]>
	    </rule>
      </validationRules>
      <dependenciesScript>
        <![CDATA[<schema xmlns="http://purl.oclc.org/dsdl/schematron">
          <pattern>
            <rule context = "FtpTlsServer">
              <assert test="number(@maxDataPort) ge number(@minDataPort)">maxDataPort must be greater than or equal to minDataPort.</assert>
            </rule>
          </pattern>
        </schema>]]>
      </dependenciesScript>
      <attribute name="ftpTlsServerId">
        <description>Holds the name used when identifying the MO.</description>
        <mandatory/>
        <noNotification/>
        <restricted/>
        <key/>
        <dataType>
          <string/>
        </dataType>
      </attribute>
      <attribute name="administrativeState">
        <description>The administrative state for the FTP server.&#13;
When LOCKED all on-going connections will immediately be terminated.</description>
        <mandatory/>
        <dataType>
          <enumRef name="BasicAdmState">
            <mimName>RcsFileTPM</mimName>
          </enumRef>
        </dataType>
      </attribute>
      <attribute name="nodeCredential">
        <description>The credential used for FTP over TLS based file transfer. &#13;
Specifies the DN of a NodeCredential MO in Certificate Management.&#13;
</description>
        <domainExtension domain="ECIM">
          <extension name="isNillable" value="true"/>
        </domainExtension>
        <isNillable/>
        <dataType>
          <moRef name="ManagedObject"/>
        </dataType>
      </attribute>
      <attribute name="trustCategory">
        <description>The set of certificates trusted by the FTP over TLS based file transfer. &#13;
Specifies the DN of a TrustCategory MO in Certificate Management.&#13;
</description>
        <domainExtension domain="ECIM">
          <extension name="isNillable" value="true"/>
        </domainExtension>
        <isNillable/>
        <dataType>
          <moRef name="ManagedObject"/>
        </dataType>
      </attribute>
      <attribute name="port">
        <description>The listening port number of the FTP over TLS server control connection.&#13;
&#13;
The TLS layer is established on the regular FTP port by issuing an "AUTH TLS" command.&#13;
</description>
        <dataType>
          <uint16>
            <defaultValue>9921</defaultValue>
          </uint16>
        </dataType>
      </attribute>
      <attribute name="minDataPort">
        <description>The minimum port number for PASV data connections.&#13;
&#13;
Must be lower or equal to maxDataPort.</description>
        <dataType>
          <uint16>
            <defaultValue>0</defaultValue>
          </uint16>
        </dataType>
      </attribute>
      <attribute name="maxDataPort">
        <description>The maximum port number for PASV data connections.&#13;
&#13;
Must be greater or equal to minDataPort.</description>
        <dataType>
          <uint16>
            <defaultValue>0</defaultValue>
          </uint16>
        </dataType>
      </attribute>
    </class>
    <class name="Sftp">
      <description>Represents the common configuration parameters of Secure Shell File Transfer Protocol (SFTP) clients on the ME.</description>
      <systemCreated/>
      <attribute name="sftpId">
        <description>Holds the name used when identifying the MO.</description>
        <mandatory/>
        <noNotification/>
        <restricted/>
        <key/>
        <dataType>
          <string/>
        </dataType>
      </attribute>
      <attribute name="selectedCiphers">
        <description>The list of selected ciphers.&#13;
&#13;
The ciphers are offered to the SSH peer in the order as configured. Each value indicates one cipher.</description>
        <mandatory/>
        <dataType>
          <sequence>
            <derivedDataTypeRef name="SshAlgorithm">
              <mimName>RcsFileTPM</mimName>
            </derivedDataTypeRef>
            <minLength>1</minLength>
          </sequence>
        </dataType>
      </attribute>
      <attribute name="selectedKeyExchanges">
        <description>The list of selected key exchange algorithms.&#13;
&#13;
The algorithms are offered to the SSH peer in the order as configured. Each value indicates one algorithm.</description>
        <mandatory/>
        <dataType>
          <sequence>
            <derivedDataTypeRef name="SshAlgorithm">
              <mimName>RcsFileTPM</mimName>
            </derivedDataTypeRef>
            <minLength>1</minLength>
          </sequence>
        </dataType>
      </attribute>
      <attribute name="selectedMacs">
        <description>The list of selected message authentication codes.&#13;
&#13;
The algorithms are offered to the SSH peer in the order as configured. Each value indicates one coding algorithm.</description>
        <mandatory/>
        <dataType>
          <sequence>
            <derivedDataTypeRef name="SshAlgorithm">
              <mimName>RcsFileTPM</mimName>
            </derivedDataTypeRef>
            <minLength>1</minLength>
          </sequence>
        </dataType>
      </attribute>
      <attribute name="supportedCiphers">
        <description>Lists the supported encryption ciphers.</description>
        <readOnly/>
        <dataType>
          <sequence>
            <derivedDataTypeRef name="SshAlgorithm">
              <mimName>RcsFileTPM</mimName>
            </derivedDataTypeRef>
            <minLength>1</minLength>
          </sequence>
        </dataType>
      </attribute>
      <attribute name="supportedKeyExchanges">
        <description>Lists the supported key exchange algorithms.</description>
        <readOnly/>
        <dataType>
          <sequence>
            <derivedDataTypeRef name="SshAlgorithm">
              <mimName>RcsFileTPM</mimName>
            </derivedDataTypeRef>
            <minLength>1</minLength>
          </sequence>
        </dataType>
      </attribute>
      <attribute name="supportedMacs">
        <description>Lists the supported message authentication codes.</description>
        <readOnly/>
        <dataType>
          <sequence>
            <derivedDataTypeRef name="SshAlgorithm">
              <mimName>RcsFileTPM</mimName>
            </derivedDataTypeRef>
            <minLength>1</minLength>
          </sequence>
        </dataType>
      </attribute>
    </class>
    <class name="SftpServer">
      <description>Represents the Secure Shell File Transfer Protocol (SFTP) server of the ME.</description>
      <systemCreated/>
      <attribute name="sftpServerId">
        <description>Holds the name used when identifying the MO.</description>
        <mandatory/>
        <noNotification/>
        <restricted/>
        <key/>
        <dataType>
          <string/>
        </dataType>
      </attribute>
      <attribute name="administrativeState">
        <description>The administrative state for the SFTP server.&#13;
When LOCKED all on-going connections will immediately be terminated.</description>
        <mandatory/>
        <dataType>
          <enumRef name="BasicAdmState">
            <mimName>RcsFileTPM</mimName>
          </enumRef>
        </dataType>
      </attribute>
      <attribute name="port">
        <description>The listening port number of the SFTP server.</description>
        <dataType>
          <uint16>
            <defaultValue>115</defaultValue>
          </uint16>
        </dataType>
      </attribute>
    </class>
    <class name="FtpServer">
      <description>Generic configuration options for a file transfer server.</description>
      <systemCreated/>
      <attribute name="ftpServerId">
        <description>Holds the name used when identifying the MO.</description>
        <mandatory/>
        <noNotification/>
        <restricted/>
        <key/>
        <dataType>
          <string/>
        </dataType>
      </attribute>
      <attribute name="idleTimer">
        <description>The amount of seconds after which an idle session is terminated.&#13;
&#13;
Specifies the maximum time an FTP session may remain idle. A session will be dropped if the length of the idle session exceeds the configured time. No idleTimer means idle sessions are not limited.</description>
        <domainExtension domain="ECIM">
          <extension name="isNillable" value="true"/>
        </domainExtension>
        <isNillable/>
        <dataType>
          <derivedDataTypeRef name="RcsFileTPM_FtpServer_idleTimer">
            <defaultValue>600</defaultValue>
            <mimName>RcsFileTPM</mimName>
          </derivedDataTypeRef>
        </dataType>
      </attribute>
    </class>
    <relationship name="FileTPM_to_FtpServer">
      <containment>
        <parent>
          <hasClass name="FileTPM">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
        </parent>
        <child>
          <hasClass name="FtpServer">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
          <cardinality>
            <min>0</min>
            <max>1</max>
          </cardinality>
        </child>
        <domainExtension domain="ECIM">
          <extension name="canCreate" value="false"/>
          <extension name="canDelete" value="false"/>
        </domainExtension>
      </containment>
    </relationship>
    <relationship name="FtpServer_to_FtpTlsServer">
      <containment>
        <parent>
          <hasClass name="FtpServer">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
        </parent>
        <child>
          <hasClass name="FtpTlsServer">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
          <cardinality>
            <min>0</min>
            <max>1</max>
          </cardinality>
        </child>
        <domainExtension domain="ECIM">
          <extension name="canCreate" value="false"/>
          <extension name="canDelete" value="false"/>
        </domainExtension>
      </containment>
    </relationship>
    <relationship name="FtpServer_to_SftpServer">
      <containment>
        <parent>
          <hasClass name="FtpServer">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
        </parent>
        <child>
          <hasClass name="SftpServer">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
          <cardinality>
            <min>0</min>
            <max>1</max>
          </cardinality>
        </child>
        <domainExtension domain="ECIM">
          <extension name="canCreate" value="false"/>
          <extension name="canDelete" value="false"/>
        </domainExtension>
      </containment>
    </relationship>
    <relationship name="FileTPM_to_FtpTls">
      <containment>
        <parent>
          <hasClass name="FileTPM">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
        </parent>
        <child>
          <hasClass name="FtpTls">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
          <cardinality>
            <min>0</min>
            <max>1</max>
          </cardinality>
        </child>
        <domainExtension domain="ECIM">
          <extension name="canCreate" value="false"/>
          <extension name="canDelete" value="false"/>
        </domainExtension>
      </containment>
    </relationship>
    <relationship name="FileTPM_to_Sftp">
      <containment>
        <parent>
          <hasClass name="FileTPM">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
        </parent>
        <child>
          <hasClass name="Sftp">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
          <cardinality>
            <min>0</min>
            <max>1</max>
          </cardinality>
        </child>
        <domainExtension domain="ECIM">
          <extension name="canCreate" value="false"/>
          <extension name="canDelete" value="false"/>
        </domainExtension>
      </containment>
    </relationship>
     <relationship name="FtpTls_to_NodeCredential">
      <biDirectionalAssociation>
        <associationEnd name="nodeCredential">
          <hasClass name="NodeCredential">
            <mimName>ECIM_CertM</mimName>
          </hasClass>
          <cardinality>
            <min>0</min>
            <max>1</max>
          </cardinality>
          <isReserving/>
        </associationEnd>
        <associationEnd name="reservedByUser">
          <hasClass name="FtpTls">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
          <cardinality>
            <min>0</min>
          </cardinality>
        </associationEnd>
      </biDirectionalAssociation>
    </relationship>
    <relationship name="FtpTls_to_TrustCategory">
      <biDirectionalAssociation>
        <associationEnd name="trustCategory">
          <hasClass name="TrustCategory">
            <mimName>ECIM_CertM</mimName>
          </hasClass>
          <cardinality>
            <min>0</min>
            <max>1</max>
          </cardinality>
          <isReserving/>
        </associationEnd>
        <associationEnd name="reservedByUser">
          <hasClass name="FtpTls">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
          <cardinality>
            <min>0</min>
          </cardinality>
        </associationEnd>
      </biDirectionalAssociation>
    </relationship>
        <relationship name="FtpTlsServer_to_NodeCredential">
      <biDirectionalAssociation>
        <associationEnd name="nodeCredential">
          <hasClass name="NodeCredential">
            <mimName>ECIM_CertM</mimName>
          </hasClass>
          <cardinality>
            <min>0</min>
            <max>1</max>
          </cardinality>
          <isReserving/>
        </associationEnd>
        <associationEnd name="reservedByUser">
          <hasClass name="FtpTlsServer">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
          <cardinality>
            <min>0</min>
          </cardinality>
        </associationEnd>
      </biDirectionalAssociation>
    </relationship>
    <relationship name="FtpTlsServer_to_TrustCategory">
      <biDirectionalAssociation>
        <associationEnd name="trustCategory">
          <hasClass name="TrustCategory">
            <mimName>ECIM_CertM</mimName>
          </hasClass>
          <cardinality>
            <min>0</min>
            <max>1</max>
          </cardinality>
          <isReserving/>
        </associationEnd>
        <associationEnd name="reservedByUser">
          <hasClass name="FtpTlsServer">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
          <cardinality>
            <min>0</min>
          </cardinality>
        </associationEnd>
      </biDirectionalAssociation>
    </relationship>
  </mim>
  <interMim>
    <relationship name="SysM_to_FileTPM">
      <containment>
        <parent>
          <hasClass name="SysM">
            <mimName>ECIM_SysM</mimName>
          </hasClass>
        </parent>
        <child>
          <hasClass name="FileTPM">
            <mimName>RcsFileTPM</mimName>
          </hasClass>
          <cardinality>
            <min>1</min>
            <max>1</max>
          </cardinality>
        </child>
        <domainExtension domain="ECIM">
          <extension name="canCreate" value="false"/>
          <extension name="canDelete" value="false"/>
        </domainExtension>
      </containment>
    </relationship>
  </interMim>
</models>
