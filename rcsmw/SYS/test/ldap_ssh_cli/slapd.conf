#slapd testconfig-file

argsfile /var/run/slapd/slapd.args
pidfile  /var/run/slapd/slapd.pid

TLSCACertificateFile    /var/lib/ldap/slapd/certs/ca-cert.pem
TLSCertificateFile      /var/lib/ldap/slapd/certs/server-cert.pem
TLSCertificateKeyFile   /var/lib/ldap/slapd/certs/server-key.pem

include /etc/ldap/schema/core.schema
include /etc/ldap/schema/cosine.schema
include /etc/ldap/schema/inetorgperson.schema

password-hash   {CLEARTEXT}

#make the server lookup up SASL secrets in the ordinary user branch
#instead of in digest-md5.auth
authz-regexp
        uid=([^,]*),cn=digest-md5,cn=auth
                uid=$1,dc=mordor,dc=invalid
                
modulepath /usr/lib/ldap
moduleload back_hdb


database hdb
directory /var/lib/ldap/slapd/database
access to * by * write
suffix dc=mordor,dc=invalid
rootdn cn=king,dc=mordor,dc=invalid
rootpw hello
